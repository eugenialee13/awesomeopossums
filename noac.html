<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="ac.css">
  <meta charset="utf-8">
  <title>No Autocomplete</title>
</head>   
<body>
  <h1>
    No Autocomplete Test!
  </h1>
  <p id="buttoncont">
    <button id="startbutton" type="button" onclick="initTest()">CLICK TO INITIALIZE</button>
  </p>
  <h2 id="etf"></h2>
  <p id="totype"></p>
  <p id ="formloc">
    <form id="formloc2">
      <textarea id="theform" rows="10" cols= "150" name="insert"></textarea>
      <br>
      <button type="button" value="Submit" onclick="nextTest()">SUBMIT</button>
    </form>
  </p>
  <script>
    var opts =
        [{code: "<span style='color:gray'>elif l1.val< l2.val:<br></span><span style='color:black:>l1.next = self.mergeTwoLists(l1.next, 12)<br></span><span style='color:gray'>return l1<br>else:<br>l2.next = self.mergeTwoLists(l1, l2.next)</span>",
           result: " ",
           time: 0,
           diff: 0
          },
         {code: "blah blah blah",
          result: " ",
          time: 0,
          diff: 0
         }];
  
    var rand;
    
    function initTest() {
      document.getElementById("etf").innerHTML = "Please type the following";
      document.getElementById("buttoncont").innerHTML = " ";
      
      nextText();
      
    }
    
    function nextText() {
      rand = Math.floor(Math.random()*opts.length);
      
      if (opts[rand].complete == "no") {
        document.getElementById("totype").innerHTML = opts[rand].code;
        opts[rand].complete = "yes";
      } else {
        nextText();
      }
    }
    
    function checkOpts() {
      var i;
      for(i = 0; i < opts.length; i++) {
        if (opts[i].complete == "no") {
            return 1;
        }
      }
        return 0;
    }
            
    function nextTest() {
      
      opts[rand].result = document.getElementById("theform").value;
      
      opts[rand].diff = measureDifference();
      
      document.getElementById("theform").value = "";
      
      if (checkOpts() == 1) {
        nextText();
      } else {
        finishTest();
      }
    }
    
    function measureDifference() {
      var str1 = (opts[rand].code).split('');
      var str2 = (opts[rand].result).split('');
      var counter = 0;
      var i;
      var max;
      
      if (str1.length > str2.length) {
        max = str1.length;
      } else {
        max = str2.length;
      }
      
      for(i = 0; i < max; i++) {
        if (str1[i] != str2[i]) {
          counter++;
        } else {
        }
      }
      return counter;
    }
    
    function finishTest() {
      document.getElementById("etf").innerHTML = "Test Complete! Data below:";
      document.getElementById("formloc").innerHTML = opts[0].result;
      document.getElementById("totype").innerHTML = opts[0].diff;
      document.getElementById("formloc2").innerHTML = opts[0].code;
    }

  </script>
</body>
</html>  
